BEGIN;

DROP TABLE IF EXISTS recyclables;
DROP TABLE IF EXISTS feedback;
DROP TABLE IF EXISTS pickups;
DROP TABLE IF EXISTS users;

CREATE TABLE users (
    id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    username TEXT NOT NULL,
    pass TEXT NOT NULL,
    joindate DATE DEFAULT now(),
    isadmin BOOLEAN NOT NULL DEFAULT FALSE,
    email TEXT DEFAULT '',
    pickuplocation TEXT DEFAULT ''
);

CREATE TABLE recyclables(
    id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    title TEXT NOT NULL
);

CREATE TABLE feedback(
    id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    msg TEXT NOT NULL,
    timesent DATE DEFAULT now(),
    sender INTEGER REFERENCES users(id) ON DELETE SET NULL
);

CREATE TABLE pickups(
    id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    details TEXT NOT NULL,
    pickuplocation TEXT NOT NULL,
    pickupdate TEXT NOT NULL,
    client INTEGER REFERENCES users(id) ON DELETE SET NULL
);

COMMIT;